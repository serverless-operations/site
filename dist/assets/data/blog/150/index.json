{"hash":"899a7dadc9c3ff481284dbd8cf731b9f93beffd5","data":{"wordPressBlog":{"title":"ローカルでのLambdaの開発に便利なServerless-Dev-Toolsを試す","content":"\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"712\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-18.32.47-1-1024x712.png\" alt=\"\" class=\"wp-image-152\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-18.32.47-1-1024x712.png 1024w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-18.32.47-1-300x209.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-18.32.47-1-768x534.png 768w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-18.32.47-1-1536x1069.png 1536w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-18.32.47-1-2048x1425.png 2048w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /></figure>\n\n\n\n<p><a href=\"https://theodo-uk.github.io/sls-dev-tools/\">Serverless-Dev-Tools</a>というターミナル上でダッシュボードを開き、Lambdaのデプロイやログ、メトリクスの確認ができる開発ツールの存在を教えてもらったのでそれを紹介していきます。</p>\n\n\n\n<p>サーバーレスの開発時にブラウザからマネジメントコンソールにアクセスしつつ、ログを確認したり状態を確認したりすることが多いと思いますが、ブラウザとエディタを行き来したり、何度もログインし直したりみたいなのが結構めんどくさいですよね。</p>\n\n\n\n<p>このツールはターミナルで専用の開発ダッシュボードを提供してマネジメントコンソールを開くこと無く開発を行えることを可能にすることがコンセプトです。</p>\n\n\n\n<p>一度ダッシュボードを開けば、キーボードショートカットでデプロイやLambdaの実行などを行えて、ログもそこから確認することが出来ます。</p>\n\n\n\n<h2 class=\"wp-block-heading\">インストール</h2>\n\n\n\n<p>Serverless-Dev-ToolsはServerless FrameworkとSAMに対応しています。<br>今回はServerless Frameworkでプロジェクトを作って、そこにツールをインストールします。</p>\n\n\n\n<p>まずは以下のコマンドでServerless Frameworkのプロジェクトを作ってAWS環境にLambdaをデプロイしましょう</p>\n\n\n\n<pre class=\"wp-block-code language-bash\"><code>$ serverless create -t aws-nodejs\n$ serverless deploy</code></pre>\n\n\n\n<p>次にyarnもしくはnpmでツールをプロジェクトのローカルにインストールします</p>\n\n\n\n<pre class=\"wp-block-code language-bash\"><code>$ yarn add -D sls-dev-tools</code></pre>\n\n\n\n<p>インストールに成功したら以下のコマンドでツールを立ち上げましょう</p>\n\n\n\n<pre class=\"wp-block-code\"><code>$ yarn sls-dev-tools -r us-east-1 -p default</code></pre>\n\n\n\n<p>こんな感じのダッシュボードが立ち上がればセットアップは完了です。</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"613\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.11.32-1024x613.png\" alt=\"\" class=\"wp-image-153\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.11.32-1024x613.png 1024w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.11.32-300x180.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.11.32-768x460.png 768w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.11.32-1536x920.png 1536w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.11.32-2048x1226.png 2048w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /></figure>\n\n\n\n<h2 class=\"wp-block-heading\">ダッシュボードの操作方法</h2>\n\n\n\n<p><code>h</code>を押すとヘルプが立ち上がります。キーボードショートカットで以下の様な様々な操作が割り当てられています</p>\n\n\n\n<figure class=\"wp-block-table\"><table><tbody><tr><td>ショートカット</td><td>操作</td></tr><tr><td>o</td><td>ブラウザで選択したLambdaのAWSマネジメントコンソールを開く</td></tr><tr><td>q</td><td>ダッシュボードを閉じる</td></tr><tr><td>d</td><td>選択したLambdaファンクションをデプロイする</td></tr><tr><td>s</td><td>スタック内のすべてのLambdaファンクションをデプロイする</td></tr><tr><td>i</td><td>指定したLambdaファンクションを実行します</td></tr><tr><td>r</td><td>選択したEventBridgeのレジストリをwindowで開きます</td></tr><tr><td>l</td><td>選択したLambdaの統計情報をwindowで開きます</td></tr></tbody></table></figure>\n\n\n\n<h2 class=\"wp-block-heading\">Lambdaのデプロイを行う</h2>\n\n\n\n<p><code>s</code>ショートカットを押すことで、<code>sls deploy</code> もしくは<code>sam deploy</code> が実行されてスタック全体がデプロイ出来ます。</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"966\" height=\"764\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.10.26.png\" alt=\"\" class=\"wp-image-163\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.10.26.png 966w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.10.26-300x237.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.10.26-768x607.png 768w\" sizes=\"(max-width: 966px) 100vw, 966px\" /></figure>\n\n\n\n<p><code>d</code> ショートカットを押すことで選択したLambdaファンクション単体がデプロイされます。hello2ファンクションを選択して <code>d</code> を実行すると以下のようにデプロイされます。</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"846\" height=\"302\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.18.06.png\" alt=\"\" class=\"wp-image-165\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.18.06.png 846w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.18.06-300x107.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-15-17.18.06-768x274.png 768w\" sizes=\"(max-width: 846px) 100vw, 846px\" /></figure>\n\n\n\n<h2 class=\"wp-block-heading\">Lambdaファンクションを実行して色々な情報を見る</h2>\n\n\n\n<p>右上のLambdaのリストから実行したいLambdaファンクションを選択して<code>i</code>を押すと以下のようにPayloadを入力するwindowが立ち上がります。そこから入力となるJSONを入力してSubmitでenterを押すことで対象のLambdaファンクションが実行されます</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"471\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.30.11-1024x471.png\" alt=\"\" class=\"wp-image-154\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.30.11-1024x471.png 1024w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.30.11-300x138.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.30.11-768x353.png 768w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.30.11-1536x706.png 1536w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.30.11.png 1744w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /></figure>\n\n\n\n<p>実行すると以下の様にCloudWatchLogs上のログがダッシュボードに表示され</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"200\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.33-1024x200.png\" alt=\"\" class=\"wp-image-155\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.33-1024x200.png 1024w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.33-300x59.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.33-768x150.png 768w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.33-1536x300.png 1536w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.33.png 1810w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /></figure>\n\n\n\n<p>Lambdaからのレスポンスも以下のように返ってきます</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"906\" height=\"358\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.39.png\" alt=\"\" class=\"wp-image-156\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.39.png 906w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.39-300x119.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.34.39-768x303.png 768w\" sizes=\"(max-width: 906px) 100vw, 906px\" /></figure>\n\n\n\n<p>実行にかかった時間も以下のようにinvocationごとに確認ができます</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"908\" height=\"728\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.38.59.png\" alt=\"\" class=\"wp-image-157\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.38.59.png 908w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.38.59-300x241.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.38.59-768x616.png 768w\" sizes=\"(max-width: 908px) 100vw, 908px\" /></figure>\n\n\n\n<p>さらに<code>l</code>キーを押すことで以下のような統計情報も確認することが出来ます</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"901\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.41.47-1024x901.png\" alt=\"\" class=\"wp-image-158\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.41.47-1024x901.png 1024w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.41.47-300x264.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.41.47-768x676.png 768w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.41.47-1536x1351.png 1536w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.41.47.png 1596w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /></figure>\n\n\n\n<h2 class=\"wp-block-heading\">どうしてもマネジメントコンソールにアクセスしたい時は</h2>\n\n\n\n<p>マネジメントコンソールにアクセスが必要ないとは言え、やはりアクセスしたい時もあるでしょう。どんな時は選択したLambdaファンクション上で<code>o</code>を押すことでコンソールが開き、以下のようにブラウザからアクセスできるようになります。</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" loading=\"lazy\" width=\"1024\" height=\"545\" src=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.50.38-1024x545.png\" alt=\"\" class=\"wp-image-159\" srcset=\"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.50.38-1024x545.png 1024w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.50.38-300x160.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.50.38-768x409.png 768w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.50.38-1536x818.png 1536w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-19.50.38-2048x1090.png 2048w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /></figure>\n\n\n\n<h2 class=\"wp-block-heading\">まとめ</h2>\n\n\n\n<p>使ってみた感想としては、主なLambdaでの操作やログの状態の確認はローカルで完結して行えるためかなり開発が楽になるんじゃないかと思いました。GitHubのスターも500を超えており、プロダクトとしての成熟度もかなり高いところまでいってるように感じています。</p>\n\n\n\n<p>サーバーレスの世界ではローカル開発のやりづらさがペインポイントとして挙げられますが、このツールを使うことでかなり開発生産性も向上するんじゃないでしょうか。</p>\n","author":{"name":"Takahiro Horike","description":"Co-founder and CEO of Serverless Operations, Inc","avatars":{"avatar96":"https://secure.gravatar.com/avatar/2ee9db3a5b6c492acf66ec14c8a5d8dc?s=96&d=mm&r=g"},"acf":{"userJpName":"堀家 隆宏","userRole":"CEO","facebook":"https://www.facebook.com/horike.takahiro","twitter":"https://twitter.com/horike37","github":"https://github.com/horike37"}},"date":"2020.08.14","path":"/blog/150/","featuredMedia":{"sourceUrl":"https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2020/08/スクリーンショット-2020-08-14-18.32.47.png","altText":"","mediaDetails":{"width":2070}},"categories":[{"id":"7","title":"Blog","path":"/category/blog/"}],"tags":[{"id":"10","title":"Lambda","path":"/tag/lambda/"},{"id":"25","title":"sls-dev-tools","path":"/tag/sls-dev-tools/"}]},"metadata":{"siteName":"Serverless Operations","siteDescription":"Serverless Operationsは、これまでグローバルの第一線で培ってきたクラウド技術（AWS − アマゾンウェブサービス）の豊富な実績と知見を活かし、お客さまのサーバーレスによる開発や運用の支援、コンサルティングまで一貫してサポート。サーバーレスに関するさまざまな課題を解決いたします。","siteUrl":"https://serverless.co.jp","siteOgImage":"https://serverless.co.jp/ogp.png"}},"context":{}}