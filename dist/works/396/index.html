<!DOCTYPE html>
<html data-html-server-rendered="true" lang="ja" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22ja%22%7D%7D">
  <head>
    <title>新たな収益源として独自サービスの内製化を目指した地方局が求める「完全サーバーレス」の実現を支援 | Serverless Operations</title><meta name="gridsome:hash" content="899a7dadc9c3ff481284dbd8cf731b9f93beffd5"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.14"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="og:locale" property="og:locale" content="ja_JP"><meta data-vue-tag="ssr" data-key="og:site_name" property="og:site_name" content="Serverless Operations"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:image" content="https://serverless.co.jp/ogp.png"><meta data-vue-tag="ssr" data-key="og:type" property="og:type" content="article"><meta data-vue-tag="ssr" data-key="og:url" property="og:url" content="https://serverless.co.jp/works/396/"><meta data-vue-tag="ssr" data-key="og:image" property="og:image" content="https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-08-14-12.07.21.png"><meta data-vue-tag="ssr" data-key="og:title" property="og:title" content="新たな収益源として独自サービスの内製化を目指した地方局が求める「完全サーバーレス」の実現を支援 | Serverless Operations"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:image" content="https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-08-14-12.07.21.png"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.2cc8acaa6971d9266cbf9d7d5455c37a.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css"><link data-vue-tag="ssr" data-key="canonical" rel="canonical" href="https://serverless.co.jp/works/396/"><link rel="preload" href="/assets/css/0.styles.adfe40b8.css" as="style"><link rel="preload" href="/assets/js/app.f355efd1.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--word-press-works-vue.dc66c364.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.84e8aa18.js"><link rel="prefetch" href="/assets/js/page--src--pages--about-vue.094252a3.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-archives-vue.771d12fd.js"><link rel="prefetch" href="/assets/js/page--src--pages--contact-vue.c49312ad.js"><link rel="prefetch" href="/assets/js/page--src--pages--download-vue.e2fb64ed.js"><link rel="prefetch" href="/assets/js/page--src--pages--event-archives-vue.dc6c64cc.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.8d1729b1.js"><link rel="prefetch" href="/assets/js/page--src--pages--news-archives-vue.2871bf8d.js"><link rel="prefetch" href="/assets/js/page--src--pages--our-products-vue.d569f152.js"><link rel="prefetch" href="/assets/js/page--src--pages--privacy-policy-vue.9015b9cf.js"><link rel="prefetch" href="/assets/js/page--src--pages--services--aws-serverless-vue.548b9c96.js"><link rel="prefetch" href="/assets/js/page--src--pages--services--aws-serverless-vue~page--src--pages--services--iot-serverless-vue.bada637e.js"><link rel="prefetch" href="/assets/js/page--src--pages--services--index-vue.605da173.js"><link rel="prefetch" href="/assets/js/page--src--pages--services--iot-serverless-vue.1324af58.js"><link rel="prefetch" href="/assets/js/page--src--pages--services--serverless-consulting-vue.bf933f33.js"><link rel="prefetch" href="/assets/js/page--src--pages--services--serverless-development-vue.d8c60529.js"><link rel="prefetch" href="/assets/js/page--src--pages--test-form-vue.37425afa.js"><link rel="prefetch" href="/assets/js/page--src--pages--works-archives-vue.b641ea0a.js"><link rel="prefetch" href="/assets/js/page--src--templates--word-press-blog-vue.fdf3ed1a.js"><link rel="prefetch" href="/assets/js/page--src--templates--word-press-category-vue.7424850d.js"><link rel="prefetch" href="/assets/js/page--src--templates--word-press-post-tag-vue.a058c92f.js"><link rel="prefetch" href="/assets/js/page--src--templates--word-press-post-vue.8fb7ceee.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--contact-vue~page--src--pages--download-vue.7a23cb3f.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--our-products-vue.8e9052c2.js"><link rel="prefetch" href="/assets/js/vendors~page--src--templates--word-press-blog-vue.16b09ab1.js"><link rel="stylesheet" href="/assets/css/0.styles.adfe40b8.css"><script data-vue-tag="ssr">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MLP4448');</script><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div id="app" data-server-rendered="true" class="v-application v-application--is-ltr theme--dark" data-v-640906ad><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MLP4448" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="v-application--wrap"><header class="header-nav" data-v-5f4f5539><div class="header-nav__logo-block" data-v-5f4f5539><a href="/" class="header-nav__logo-link active" data-v-5f4f5539><img src="/assets/img/header-logo.a93f880b.svg" alt="Severless Operations ロゴ" class="header-nav__logo" data-v-5f4f5539></a></div><nav data-v-5f4f5539><ul data-v-5f4f5539><li data-v-5f4f5539><a href="/about" data-v-5f4f5539>私たちについて</a></li><li data-v-5f4f5539><a href="/services" data-v-5f4f5539>サービス</a></li><li data-v-5f4f5539><a href="/works-archives" data-v-5f4f5539>実績紹介</a></li><li data-v-5f4f5539><a href="/blog-archives" data-v-5f4f5539>ブログ</a></li><li data-v-5f4f5539><a href="/news-archives" data-v-5f4f5539>お知らせ</a></li><li data-v-5f4f5539><a href="/download" data-v-5f4f5539>会社資料ダウンロード</a></li><li data-v-5f4f5539><a href="/contact" data-v-5f4f5539>お問い合わせ</a></li></ul></nav><div id="app" class="header-nav__toggler-block d-block d-md-none" data-v-5f4f5539><button id="btn" type="button" class="header-nav__toggler-button btn" data-v-5f4f5539><div tabindex="-1" class="btn__content" data-v-5f4f5539><span class="header-nav__toggler-top" data-v-5f4f5539></span><span class="header-nav__toggler-middle" data-v-5f4f5539></span><span class="header-nav__toggler-bottom" data-v-5f4f5539></span></div></button></div><!----></header><main class="v-content"><div class="v-content" data-v-640906ad><div class="v-content__wrap" data-v-640906ad><div class="container" data-v-640906ad><p class="category-title" data-v-640906ad>
          Works
        </p></div><header class="post-header" data-v-640906ad><div class="container" data-v-640906ad><div class="row justify-center" data-v-640906ad><div class="col-md-10 col-11" data-v-640906ad><h1 class="post-title" data-v-640906ad>新たな収益源として独自サービスの内製化を目指した地方局が求める「完全サーバーレス」の実現を支援</h1><div class="post-tag-container" data-v-640906ad><time datetime="2021.08.13" class="post-date" data-v-640906ad> 
                  2021.08.13
                  
                </time><div class="post-tags" data-v-640906ad><span data-v-640906ad>Lambda</span></div><div class="post-tags" data-v-640906ad><span data-v-640906ad>Serverless</span></div></div></div></div></div></header><article class="post-container" data-v-640906ad><div class="container" data-v-640906ad><div class="row justify-center" data-v-640906ad><div class="post-article-container col-md-10 col-11" data-v-640906ad><img src="https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-08-14-12.07.21.png" width="2178" alt="新たな収益源として独自サービスの内製化を目指した地方局が求める「完全サーバーレス」の実現を支援" class="post-article-main-img post-works-img" data-v-640906ad><div class="row justify-center" data-v-640906ad><div class="works-company-profile col-12 row" data-v-640906ad><div class="company-logo-container col-sm-4 col-12" data-v-640906ad><img alt="" src="https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/0001-00-20170601170222.png" class="company-logo g-image" data-v-640906ad></div><div class="col-sm-8 col-12" data-v-640906ad><h3 class="company-name" data-v-640906ad>北海道テレビ放送株式会社</h3><p class="company-profile" data-v-640906ad><p><span style="font-weight: 400;">北海道テレビ放送(HTB)は<br />
1968年に北海道初のUHF局として誕生した民間放送局です。<br />
「水曜どうでしょう」を初めとしたバラエティ番組や、多くの受賞歴経験を持つニュース・ドキュメンタリー、そしてドラマなど、様々な分野の番組制作や放送を通して、「ユメミル、チカラ」を応援し、 地域の未来に貢献していきたいと考えています。</span></p>
</p></div></div></div><div class="post-article" data-v-640906ad>
<blockquote class="wp-block-quote" id="block-fea071d1-567a-4b07-8145-95eaa300595e"><p><strong>【サマリー】</strong><br><br>・有料映像配信サービスとECとが融合したオリジナルサービスの開発支援をServerless Operationsが担当<br>・限られた人材で効率的な開発を行うために、サーバーレスのアーキテクチャが必要条件<br>・RDBを使わずにAmazon DynamoDBの条件付き書き込みによってEC在庫の厳密な処理を実演</p></blockquote>



<h2 class="wp-block-heading">はじめに</h2>



<p>北海道テレビ放送株式会社（以下、HTB）は、札幌に本拠地を置く北海道を対象とした放送局です。東京や大阪に拠点を置き全国で放送される番組を作るいわゆるキー局とはことなり、地域に向けた番組作りを行っていますが、そうした番組のひとつ「水曜どうでしょう」は徐々に人気を獲得し、今では全国的に知られるまでになりました。</p>



<p>同局の三浦一樹さんは、コンテンツビジネス局ネットデジタル事業部に所属し、同社のストリーミングサービスやECサイトの開発や運営を主導する立場。しかし、三浦さん自身もチームのメンバーもエンジニアではないため、サービス開発ではしばしば行き詰まることがありました。そこで開発支援をServerless Operationsに依頼した。その経緯を三浦さんと、Serverless Operationsの堀家さん金さんにうかがいました。</p>



<figure class="wp-block-image size-full"><img decoding="async" loading="lazy" width="3412" height="1912" src="https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-07-20-14.00.57.png" alt="左上から時計回りで、Serverless Operations金さん、北海道テレビ三浦さん、ライター青山さん、Serverless Operations堀家さん" class="wp-image-397" srcset="https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-07-20-14.00.57.png 3412w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-07-20-14.00.57-300x168.png 300w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-07-20-14.00.57-1024x574.png 1024w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-07-20-14.00.57-768x430.png 768w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-07-20-14.00.57-1536x861.png 1536w, https://cdn.getshifter.co/f6642def64a63651c07142605e040674c5441f6d/uploads/2021/08/スクリーンショット-2021-07-20-14.00.57-2048x1148.png 2048w" sizes="(max-width: 3412px) 100vw, 3412px" /><figcaption><meta charset="utf-8">左上から時計回りで、Serverless Operations金さん、北海道テレビ三浦さん、ライター青山さん、Serverless Operations堀家さん</figcaption></figure>



<h2 class="wp-block-heading">開発する上でサーバーレスが絶対条件のワケ</h2>



<p>――HTBは放送局ですが、三浦さんはそこでどのようなサービスを提供されているんでしょうか。</p>



<p>三浦　コンテンツビジネス局のネットデジタル事業部というところに所属しておりまして、コンテンツビジネス局全体が放送外収入を支える事業部というイメージですね。放送局は企業などに広告枠を買っていただいて、CMを流すことが主な収益になるんですが、私の部署はそれ以外で収益を上げるところです。</p>



<p>例えば、弊社には「onちゃん」というオリジナルキャラクターがいるんですが、そのグッズを販売したり、「水曜どうでしょう」のグッズを売ったり、独自のVODサービスで弊社が製作した番組をストリーミング配信したり、他局が弊社のコンテンツを二次利用する時の権利処理とかをしています。そのなかで私は開発を担当しています。</p>



<p>――放送局で放送以外の仕事となると、とても幅広く手がけることになるんですね。今回、Serverless Operationsには開発支援を依頼したそうですが、どのようなシステム開発に取り組んでいたのですか。</p>



<p>三浦　「onライン劇場」という、有料での映像配信とグッズ販売のECとが一緒になったサービスです。2020年に新型コロナウイルス感染症の拡大によって、各種のオフラインイベントが潰れてしまったので、その代替施策として考えたものです。</p>



<p>もともと2019年に「水曜どうでしょう祭　FESTIVAL in SAPPORO2019」というオフラインのイベントを実施した際、一緒に有料での動画配信の仕組みを作っていたので、それを活用したかったんです。その動画配信の仕組みをテコ入れして、配信ページにShopifyの購入ボタンを貼り付けただけのような形で、最初のonライン劇場がスタートしました。</p>



<p>その当時、動画を見ながら関連グッズを買えるというサービスが見当たらなかったので、自分で作るしかないと思ったのが、アイデアのきっかけです。結果的にある程度、うまくいったので、社内を説得して開発費が出ることになり、不満だった部分を作り直すところから、Serverless Operationsに開発支援で入ってもらいました。</p>



<figure class="wp-block-image"><img decoding="async" src="https://lh5.googleusercontent.com/9osoCVoioojxpxL7tz23d54Dmxopz2YLn3dYJ4_1OeUnah500GYVzIfMDJUuZlNVcCXJ7mf4Ku1Mh36ZmiYDCrQd3v9hM_uHGiFaOBJh1HzgPlHTuaXosHIW9_9v5NGh2upG7FOX" alt="HTB nline劇場"/></figure>



<p>――なぜ、最終的にServerless Operationsを選んだんでしょうか。</p>



<p>三浦　最初のVODサービスの開発を依頼したところも含めて、いくつかの開発会社に相談をしていて、Serverless Operationsもそのひとつでした。もともと堀家さんとは、あるユーザー主体の勉強会で知り合いました。勉強会のライトニングトークで動画配信について話したら、その後の懇親会で堀家さんが声を掛けてくれて、それがとても印象に残っていたんです。</p>



<p>今回の開発にあたって大前提だったのは、サーバーレスで行うことでした。そのわけを私はよく冗談で「宗教上の理由で」といっていますが、それというのも我々の部署にはサーバーサイドエンジニアもネットワークエンジニアもいないんですね。だから、できるだけ開発するときは、コーディング以外のことをしたくないので、サーバーレスという条件は絶対的なものなんです。</p>



<p>私自身、HTBの入社当初は「放送監視」という、放送されている番組を一日中見るという仕事で、それまで開発経験はありませんでした。他のメンバーも電波塔で電源工事をしたり、壁の補修でモルタルを塗ったりと、まったくITとは無関係の経歴の人間ばかり。そういうメンバー達と一緒に、勉強しながら開発しているんです。</p>



<p>だから、できるだけ余計なことはしたくないのですが、開発会社に相談すると、ほとんどがサーバを立てることが前提なんですよね。僕らは、クラウドのなかには極力、なにも置きたくないのに、すぐにサーバを立てることが必要な提案をしてくる。まるでサーバーレスという要望がわがままなことかのように言われると、残念な気持ちになってしまいます。</p>



<p>そこで、AWSのパートナーになっている会社にもいくつか話を聞きましたが、フロントもバックエンドもできるところや、Auth0などの外部のAPI連携に詳しいところとなるとなかなかなくて、そういう区別無しに相談に乗ってくれたところはServerless Operationsだけだったんです。</p>



<h1 class="wp-block-heading">冷や汗をかいた過剰販売を二度と起こさない</h1>



<p>――Serverless Operationsは、具体的にどのような支援を行ったんですか。</p>



<p>金　開発に当たって、いろいろな質問を受けて、それに対して回答するという形で支援しました。最初は不定期でしたが、途中からは週1回の定例会議を設定して、そこでまとめて受け付けるようになりました。</p>



<p>開発に関して一番、印象的だったのが、EC部分の在庫管理の仕組みのところですね。グッズの販売で在庫管理が上手くいかずに在庫数以上の販売を行ってしまうというトラブルに対して、DynamoDBの条件付き書き込みという機能を使って解決しました。</p>



<p>三浦　2020年の10月に、onライン劇場で「水曜どうでしょう」の福袋を限定販売したんですね。結果的に400個くらいが数分で売り切れて喜んでいたんですが、販売後にShopifyの管理画面を開いたら、在庫がゼロではなくてマイナス10になっていたんです。つまり、実際に在庫している数よりも10個も多く売ってしまっていたんです。</p>



<p>調べたら、Shopifyが標準で用意している決済方法なら問題ないはずが、JCBに対応するための別の決済方法を使ったのが原因でした。過剰販売分はキャンセルしてしまえば対応も簡単でしたが、お客さんが楽しみにしているからそれはしたくなかった。結局、あちこちにお願いして回って、なんとか商品が確保できましたが、めちゃくちゃ肝が冷えた出来事でした。</p>



<p>それで、ECでの発注処理のデータベースの更新処理も自分たちでコードを書くことにしたんですが、絶対に在庫がマイナスにならないようにするためにはどうしたらよいのか、いろいろやってもできなかったんです。</p>



<p>金　そのタイミングで相談を受けて、僕も1週間くらい悩んで、DynamoDBの条件付き書き込みを使えば上手く行くことに気がつきました。DynamoDBの条件付き書き込みは、トランザクション処理ではなくて、単一レコードに対する排他制御です。DynamoDBにはそもそも楽観的排他制御っていう手法はあるんですが、いずれにしても結果整合にフォーカスした対応なので、今回のような在庫だと単一レコードに対する強い一貫性のある排他制御が必要です。</p>



<p>そこで、多少のパフォーマンスは犠牲にして、強い一貫性の書き込みモードを維持しつつ、在庫数をチェックしながら書き込みを行うということをしています。SQLが使えるリレーショナルデータベースなら簡単にできることなんですが、DynamoDBの本来の使い方からするとレアな機能です。ただ、古くからある機能なので、それを使ってサンプルコードも作成して上手く行きました。</p>



<figure class="wp-block-image"><img decoding="async" src="https://lh3.googleusercontent.com/Ne3595iK_Jf0hYW_7KLv8vdPwVco6aoKezun31pu5Gmw2NQZXPnAZBMcZZVyqV2jmUwJH9s7WwRYk96D79hGqrkdeXHahbkk3LMbhaRT686vBQktzU2zFrloo8OseIO_J4ma3aLx" alt="在庫数の操作"/></figure>



<h1 class="wp-block-heading">蓄積したノウハウで将来は他の地方局の支援にも</h1>



<p>――今回の要望をDynamoDBで実現するのは、そんなに珍しいなケースなんでしょうか</p>



<p>堀家　一般的にはリレーショナルデータベースを使った方が簡単にできます。ただし、AWSでリレーショナルデータベースを使うにはAmazon RDSというサービスになるんですが、これを利用するにはAWSのなかでネットワークの設定が必要になるので、考えることが一気に増えます。DynamoDBならネットワークのことを一切考えなくてよいですから、すべてサーバーレスで開発するなら、Amazon RDSの利用は躊躇します。結局、レイヤーの違うサービスなんですよね。</p>



<p>三浦　SQLなんてメンバーの誰も書いたことがないし、まずリレーショナルデータベース自体をよく知らない。DynamoDBのようにAPIのレスポンスだとイメージが付くんですけど、SQLだとよくわからないんですよ。</p>



<p>堀家　強力な整合性のある読み込みを行うケースは、リレーショナルデータベースであってもあまりない要件です。実際には、リレーショナルデータベースでも、リードレプリカが存在する場合に書き込みしたデータが全てのレプリカに完全に伝搬するのに少しの時差があるんですけど、そこの時差で困るケースってあまりないですから。</p>



<p>――ECでそこまでトラフィックが殺到したのは、「水曜どうでしょう」のような人気コンテンツだからですよね。</p>



<p>三浦　ただ、テレビ放送がきっかけになってウェブサーバーが落ちるということはよくある話で、TV業界は「スパイク」を見やすい業界と良く言われています。AWSの認定試験でも、「TVCMを受けてスパイクがたくさん来る場合はどうするか」という問題がよく出されます。</p>



<p>単純なコンテンツサーバーだけではなくて、ECの場合でもDynamoDBを使ったサーバーレスで構築できて、スパイクにも対応できるというのは、いざというときに切れるカードを持てるようになったので、すごく大きいことです。最終的には、TV局でのこうしたウェブ周りのシステムのノウハウをつかって、他の地方局をお手伝いできるようになれたらいいと思っています。</p>



<p>そのためにも、金さんのようなエンジニアの考え方や行動指針をもっと身につけて、最終的には誰にも頼らずに自社内だけで考えたり、作ったりできるようになっていければいいと思っています。まだまだ、金さんには頼ることが多いですが、すごく成長させていただいて、その目標に向けた大きな一歩を踏み出せたのはServerless Operationsのおかげです。</p>
</div><section class="l-share-button" data-v-629ec8b5 data-v-640906ad><aside class="p-share-button" data-v-629ec8b5><div class="p-share-button__header" data-v-629ec8b5>SHARE</div><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fserverless.co.jp%2Fworks%2F396%2F" target="_blank" title="Facebookでシェア" class="p-share-button__link--facebook " data-v-629ec8b5><i class="mdi mdi-facebook" data-v-629ec8b5></i></a><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fserverless.co.jp%2Fworks%2F396%2F&amp;text=%E6%96%B0%E3%81%9F%E3%81%AA%E5%8F%8E%E7%9B%8A%E6%BA%90%E3%81%A8%E3%81%97%E3%81%A6%E7%8B%AC%E8%87%AA%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E5%86%85%E8%A3%BD%E5%8C%96%E3%82%92%E7%9B%AE%E6%8C%87%E3%81%97%E3%81%9F%E5%9C%B0%E6%96%B9%E5%B1%80%E3%81%8C%E6%B1%82%E3%82%81%E3%82%8B%E3%80%8C%E5%AE%8C%E5%85%A8%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%B9%E3%80%8D%E3%81%AE%E5%AE%9F%E7%8F%BE%E3%82%92%E6%94%AF%E6%8F%B4" target="_blank" title="Twitterでシェア" class="p-share-button__link--twitter" data-v-629ec8b5><i class="mdi mdi-twitter" data-v-629ec8b5></i></a></aside></section></div></div></div><div class="p-news-bg" data-v-640906ad></div></article><div class="container" data-v-640906ad><div class="row justify-center" data-v-640906ad><a href="/works-archives" class="post-archives-link" data-v-640906ad><span class="post-archives-link-text" data-v-640906ad>BACK TO LIST</span><span data-v-640906ad><img src="/assets/img/icon-back-to-list.3add3700.svg" alt="BACK TO LIST アイコン" data-v-640906ad></span></a></div></div></div></div></main><footer class="v-footer footer v-sheet v-sheet--tile theme--dark" data-v-a49f4c2c><div class="container" data-v-a49f4c2c data-v-a49f4c2c><div class="row" data-v-a49f4c2c data-v-a49f4c2c><div class="footer-list-anim col-sm-6 col-md-3 col-12" data-v-a49f4c2c data-v-a49f4c2c><a href="/works-archives" class="c-footer-list__link" data-v-a49f4c2c><div class="c-footer-menu__title" data-v-a49f4c2c>Works</div><div class="c-footer-menu__subtitle" data-v-a49f4c2c>実績紹介</div></a><ul class="c-footer-list" data-v-a49f4c2c><div data-v-b68eaa08 data-v-a49f4c2c><li class="c-footer-list__item" data-v-b68eaa08><a href="/works/666/" class="c-footer-list__link" data-v-b68eaa08>
      A社（企業名非公開）
    </a></li><li class="c-footer-list__item" data-v-b68eaa08><a href="/works/501/" class="c-footer-list__link" data-v-b68eaa08>
      戸田建設株式会社
    </a></li><li class="c-footer-list__item" data-v-b68eaa08><a href="/works/396/" class="c-footer-list__link active--exact active" data-v-b68eaa08>
      北海道テレビ放送株式会社
    </a></li><li class="c-footer-list__item" data-v-b68eaa08><a href="/works/358/" class="c-footer-list__link" data-v-b68eaa08>
      株式会社Geolonia
    </a></li><li class="c-footer-list__item" data-v-b68eaa08><a href="/works/24/" class="c-footer-list__link" data-v-b68eaa08>
      株式会社LIXIL
    </a></li><li class="c-footer-list__item" data-v-b68eaa08><a href="/works/185/" class="c-footer-list__link" data-v-b68eaa08>
      株式会社TOKION
    </a></li></div></ul></div><div class="footer-list-anim col-sm-6 col-md-3 col-12" data-v-a49f4c2c data-v-a49f4c2c><div data-v-a49f4c2c><a href="/services" class="c-footer-list__link" data-v-a49f4c2c><div class="c-footer-menu__title" data-v-a49f4c2c>Services</div><div class="c-footer-menu__subtitle" data-v-a49f4c2c>サービス紹介</div></a></div><ul class="c-footer-list" data-v-a49f4c2c><li class="c-footer-list__item" data-v-a49f4c2c><a href="/services" class="c-footer-list__link" data-v-a49f4c2c>サーバーレスオペレーションズの<br data-v-a49f4c2c>サービスと強み</a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/services/iot-serverless" class="c-footer-list__link" data-v-a49f4c2c>
              IoT × サーバーレス / コンテナ開発<br data-v-a49f4c2c>導⼊サポート
            </a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/services/aws-serverless" class="c-footer-list__link" data-v-a49f4c2c>
              AWSコアサーバーレスサービスの開発導⼊サポート
            </a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/services/serverless-consulting" class="c-footer-list__link" data-v-a49f4c2c>サーバーレスコンサルティング</a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/services/serverless-development" class="c-footer-list__link" data-v-a49f4c2c>サーバーレスディべロプメント</a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/our-products" class="c-footer-list__link" data-v-a49f4c2c>
              自社開発プロダクト
            </a></li></ul></div><div class="footer-list-anim col-sm-6 col-md-3 col-12" data-v-a49f4c2c data-v-a49f4c2c><a href="/blog-archives" class="c-footer-list__link" data-v-a49f4c2c><div class="c-footer-menu__title" data-v-a49f4c2c>Blog</div><div class="c-footer-menu__subtitle" data-v-a49f4c2c>開発ブログ</div></a><ul class="c-footer-list" data-v-a49f4c2c><div data-v-39434060 data-v-a49f4c2c><li class="c-footer-list__item" data-v-39434060><a href="/blog/640/" class="c-footer-list__link" data-v-39434060>
      AWS 開発基盤として、セキュリティを考慮したマルチアカウント構成のススメ
    </a></li><li class="c-footer-list__item" data-v-39434060><a href="/blog/532/" class="c-footer-list__link" data-v-39434060>
      AWS Amplify GraphQL Transformer v2 のデータモデリングとリレーションの仕組みを解説する
    </a></li><li class="c-footer-list__item" data-v-39434060><a href="/blog/512/" class="c-footer-list__link" data-v-39434060>
      AWS Lambda + Nuxt3で実現する「サーバーレスなSSR」とその構成
    </a></li><li class="c-footer-list__item" data-v-39434060><a href="/blog/25/" class="c-footer-list__link" data-v-39434060>
      Serverless Frameworkの使い方まとめ
    </a></li><li class="c-footer-list__item" data-v-39434060><a href="/blog/450/" class="c-footer-list__link" data-v-39434060>
      軽量で簡単に使えるキャッシュSaaS、MomentoをAWS Lambdaから使ってみる
    </a></li><li class="c-footer-list__item" data-v-39434060><a href="/blog/429/" class="c-footer-list__link" data-v-39434060>
      Next.js アプリケーションを AWS Amplify でホスティングする上でのTIPS
    </a></li></div></ul></div><div class="footer-list-anim col-sm-6 col-md-3 col-12" data-v-a49f4c2c data-v-a49f4c2c><a href="/about" class="c-footer-list__link" data-v-a49f4c2c><div class="c-footer-menu__title" data-v-a49f4c2c>About</div><div class="c-footer-menu__subtitle" data-v-a49f4c2c>会社案内</div></a><ul class="c-footer-list" data-v-a49f4c2c><li class="c-footer-list__item" data-v-a49f4c2c><a href="/about" class="c-footer-list__link" data-v-a49f4c2c>
              会社案内
            </a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/news-archives/" class="c-footer-list__link" data-v-a49f4c2c>
              おしらせ
            </a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/privacy-policy/" class="c-footer-list__link" data-v-a49f4c2c>
              プライバシーポリシー
            </a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/download" class="c-footer-list__link" data-v-a49f4c2c>
              会社資料ダウンロード
            </a></li><li class="c-footer-list__item" data-v-a49f4c2c><a href="/contact" class="c-footer-list__link" data-v-a49f4c2c>
              お問い合わせ
            </a></li></ul></div></div><div class="row mt-8 mt-md-12" data-v-a49f4c2c data-v-a49f4c2c><div class="col-md-2 col-12" data-v-a49f4c2c data-v-a49f4c2c><div data-v-a49f4c2c><a href="/" class="active" data-v-a49f4c2c><img src="/assets/img/footer-severless-operations-logo.e1e6687a.svg" alt="Severless Operations ロゴ" data-v-a49f4c2c></a></div></div><div class="col-md-10 col-12" data-v-a49f4c2c data-v-a49f4c2c><div class="sns-link text-md-right" data-v-a49f4c2c><a href="https://github.com/serverless-operations" target="_blank" class="sns-link__github" data-v-a49f4c2c><i aria-hidden="true" class="v-icon notranslate mdi mdi-github theme--light" data-v-a49f4c2c></i></a><a href="https://twitter.com/slsopsinc" target="_blank" class="sns-link__twitter" data-v-a49f4c2c><i aria-hidden="true" class="v-icon notranslate mdi mdi-twitter theme--light" data-v-a49f4c2c></i></a></div></div><div class="footer-copyright" data-v-a49f4c2c>
        © Serverless Operations, inc
      </div></div></div></footer></div></div>
    <script>window.__INITIAL_STATE__={"data":{"wordPressWorks":{"title":"新たな収益源として独自サービスの内製化を目指した地方局が求める「完全サーバーレス」の実現を支援","content":"\n\u003Cblockquote class=\"wp-block-quote\" id=\"block-fea071d1-567a-4b07-8145-95eaa300595e\"\u003E\u003Cp\u003E\u003Cstrong\u003E【サマリー】\u003C\u002Fstrong\u003E\u003Cbr\u003E\u003Cbr\u003E・有料映像配信サービスとECとが融合したオリジナルサービスの開発支援をServerless Operationsが担当\u003Cbr\u003E・限られた人材で効率的な開発を行うために、サーバーレスのアーキテクチャが必要条件\u003Cbr\u003E・RDBを使わずにAmazon DynamoDBの条件付き書き込みによってEC在庫の厳密な処理を実演\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\n\n\n\u003Ch2 class=\"wp-block-heading\"\u003Eはじめに\u003C\u002Fh2\u003E\n\n\n\n\u003Cp\u003E北海道テレビ放送株式会社（以下、HTB）は、札幌に本拠地を置く北海道を対象とした放送局です。東京や大阪に拠点を置き全国で放送される番組を作るいわゆるキー局とはことなり、地域に向けた番組作りを行っていますが、そうした番組のひとつ「水曜どうでしょう」は徐々に人気を獲得し、今では全国的に知られるまでになりました。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E同局の三浦一樹さんは、コンテンツビジネス局ネットデジタル事業部に所属し、同社のストリーミングサービスやECサイトの開発や運営を主導する立場。しかし、三浦さん自身もチームのメンバーもエンジニアではないため、サービス開発ではしばしば行き詰まることがありました。そこで開発支援をServerless Operationsに依頼した。その経緯を三浦さんと、Serverless Operationsの堀家さん金さんにうかがいました。\u003C\u002Fp\u003E\n\n\n\n\u003Cfigure class=\"wp-block-image size-full\"\u003E\u003Cimg decoding=\"async\" loading=\"lazy\" width=\"3412\" height=\"1912\" src=\"https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-07-20-14.00.57.png\" alt=\"左上から時計回りで、Serverless Operations金さん、北海道テレビ三浦さん、ライター青山さん、Serverless Operations堀家さん\" class=\"wp-image-397\" srcset=\"https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-07-20-14.00.57.png 3412w, https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-07-20-14.00.57-300x168.png 300w, https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-07-20-14.00.57-1024x574.png 1024w, https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-07-20-14.00.57-768x430.png 768w, https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-07-20-14.00.57-1536x861.png 1536w, https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-07-20-14.00.57-2048x1148.png 2048w\" sizes=\"(max-width: 3412px) 100vw, 3412px\" \u002F\u003E\u003Cfigcaption\u003E\u003Cmeta charset=\"utf-8\"\u003E左上から時計回りで、Serverless Operations金さん、北海道テレビ三浦さん、ライター青山さん、Serverless Operations堀家さん\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Ch2 class=\"wp-block-heading\"\u003E開発する上でサーバーレスが絶対条件のワケ\u003C\u002Fh2\u003E\n\n\n\n\u003Cp\u003E――HTBは放送局ですが、三浦さんはそこでどのようなサービスを提供されているんでしょうか。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E三浦　コンテンツビジネス局のネットデジタル事業部というところに所属しておりまして、コンテンツビジネス局全体が放送外収入を支える事業部というイメージですね。放送局は企業などに広告枠を買っていただいて、CMを流すことが主な収益になるんですが、私の部署はそれ以外で収益を上げるところです。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E例えば、弊社には「onちゃん」というオリジナルキャラクターがいるんですが、そのグッズを販売したり、「水曜どうでしょう」のグッズを売ったり、独自のVODサービスで弊社が製作した番組をストリーミング配信したり、他局が弊社のコンテンツを二次利用する時の権利処理とかをしています。そのなかで私は開発を担当しています。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E――放送局で放送以外の仕事となると、とても幅広く手がけることになるんですね。今回、Serverless Operationsには開発支援を依頼したそうですが、どのようなシステム開発に取り組んでいたのですか。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E三浦　「onライン劇場」という、有料での映像配信とグッズ販売のECとが一緒になったサービスです。2020年に新型コロナウイルス感染症の拡大によって、各種のオフラインイベントが潰れてしまったので、その代替施策として考えたものです。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003Eもともと2019年に「水曜どうでしょう祭　FESTIVAL in SAPPORO2019」というオフラインのイベントを実施した際、一緒に有料での動画配信の仕組みを作っていたので、それを活用したかったんです。その動画配信の仕組みをテコ入れして、配信ページにShopifyの購入ボタンを貼り付けただけのような形で、最初のonライン劇場がスタートしました。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003Eその当時、動画を見ながら関連グッズを買えるというサービスが見当たらなかったので、自分で作るしかないと思ったのが、アイデアのきっかけです。結果的にある程度、うまくいったので、社内を説得して開発費が出ることになり、不満だった部分を作り直すところから、Serverless Operationsに開発支援で入ってもらいました。\u003C\u002Fp\u003E\n\n\n\n\u003Cfigure class=\"wp-block-image\"\u003E\u003Cimg decoding=\"async\" src=\"https:\u002F\u002Flh5.googleusercontent.com\u002F9osoCVoioojxpxL7tz23d54Dmxopz2YLn3dYJ4_1OeUnah500GYVzIfMDJUuZlNVcCXJ7mf4Ku1Mh36ZmiYDCrQd3v9hM_uHGiFaOBJh1HzgPlHTuaXosHIW9_9v5NGh2upG7FOX\" alt=\"HTB nline劇場\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Cp\u003E――なぜ、最終的にServerless Operationsを選んだんでしょうか。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E三浦　最初のVODサービスの開発を依頼したところも含めて、いくつかの開発会社に相談をしていて、Serverless Operationsもそのひとつでした。もともと堀家さんとは、あるユーザー主体の勉強会で知り合いました。勉強会のライトニングトークで動画配信について話したら、その後の懇親会で堀家さんが声を掛けてくれて、それがとても印象に残っていたんです。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E今回の開発にあたって大前提だったのは、サーバーレスで行うことでした。そのわけを私はよく冗談で「宗教上の理由で」といっていますが、それというのも我々の部署にはサーバーサイドエンジニアもネットワークエンジニアもいないんですね。だから、できるだけ開発するときは、コーディング以外のことをしたくないので、サーバーレスという条件は絶対的なものなんです。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E私自身、HTBの入社当初は「放送監視」という、放送されている番組を一日中見るという仕事で、それまで開発経験はありませんでした。他のメンバーも電波塔で電源工事をしたり、壁の補修でモルタルを塗ったりと、まったくITとは無関係の経歴の人間ばかり。そういうメンバー達と一緒に、勉強しながら開発しているんです。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003Eだから、できるだけ余計なことはしたくないのですが、開発会社に相談すると、ほとんどがサーバを立てることが前提なんですよね。僕らは、クラウドのなかには極力、なにも置きたくないのに、すぐにサーバを立てることが必要な提案をしてくる。まるでサーバーレスという要望がわがままなことかのように言われると、残念な気持ちになってしまいます。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003Eそこで、AWSのパートナーになっている会社にもいくつか話を聞きましたが、フロントもバックエンドもできるところや、Auth0などの外部のAPI連携に詳しいところとなるとなかなかなくて、そういう区別無しに相談に乗ってくれたところはServerless Operationsだけだったんです。\u003C\u002Fp\u003E\n\n\n\n\u003Ch1 class=\"wp-block-heading\"\u003E冷や汗をかいた過剰販売を二度と起こさない\u003C\u002Fh1\u003E\n\n\n\n\u003Cp\u003E――Serverless Operationsは、具体的にどのような支援を行ったんですか。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E金　開発に当たって、いろいろな質問を受けて、それに対して回答するという形で支援しました。最初は不定期でしたが、途中からは週1回の定例会議を設定して、そこでまとめて受け付けるようになりました。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E開発に関して一番、印象的だったのが、EC部分の在庫管理の仕組みのところですね。グッズの販売で在庫管理が上手くいかずに在庫数以上の販売を行ってしまうというトラブルに対して、DynamoDBの条件付き書き込みという機能を使って解決しました。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E三浦　2020年の10月に、onライン劇場で「水曜どうでしょう」の福袋を限定販売したんですね。結果的に400個くらいが数分で売り切れて喜んでいたんですが、販売後にShopifyの管理画面を開いたら、在庫がゼロではなくてマイナス10になっていたんです。つまり、実際に在庫している数よりも10個も多く売ってしまっていたんです。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E調べたら、Shopifyが標準で用意している決済方法なら問題ないはずが、JCBに対応するための別の決済方法を使ったのが原因でした。過剰販売分はキャンセルしてしまえば対応も簡単でしたが、お客さんが楽しみにしているからそれはしたくなかった。結局、あちこちにお願いして回って、なんとか商品が確保できましたが、めちゃくちゃ肝が冷えた出来事でした。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003Eそれで、ECでの発注処理のデータベースの更新処理も自分たちでコードを書くことにしたんですが、絶対に在庫がマイナスにならないようにするためにはどうしたらよいのか、いろいろやってもできなかったんです。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E金　そのタイミングで相談を受けて、僕も1週間くらい悩んで、DynamoDBの条件付き書き込みを使えば上手く行くことに気がつきました。DynamoDBの条件付き書き込みは、トランザクション処理ではなくて、単一レコードに対する排他制御です。DynamoDBにはそもそも楽観的排他制御っていう手法はあるんですが、いずれにしても結果整合にフォーカスした対応なので、今回のような在庫だと単一レコードに対する強い一貫性のある排他制御が必要です。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003Eそこで、多少のパフォーマンスは犠牲にして、強い一貫性の書き込みモードを維持しつつ、在庫数をチェックしながら書き込みを行うということをしています。SQLが使えるリレーショナルデータベースなら簡単にできることなんですが、DynamoDBの本来の使い方からするとレアな機能です。ただ、古くからある機能なので、それを使ってサンプルコードも作成して上手く行きました。\u003C\u002Fp\u003E\n\n\n\n\u003Cfigure class=\"wp-block-image\"\u003E\u003Cimg decoding=\"async\" src=\"https:\u002F\u002Flh3.googleusercontent.com\u002FNe3595iK_Jf0hYW_7KLv8vdPwVco6aoKezun31pu5Gmw2NQZXPnAZBMcZZVyqV2jmUwJH9s7WwRYk96D79hGqrkdeXHahbkk3LMbhaRT686vBQktzU2zFrloo8OseIO_J4ma3aLx\" alt=\"在庫数の操作\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\n\u003Ch1 class=\"wp-block-heading\"\u003E蓄積したノウハウで将来は他の地方局の支援にも\u003C\u002Fh1\u003E\n\n\n\n\u003Cp\u003E――今回の要望をDynamoDBで実現するのは、そんなに珍しいなケースなんでしょうか\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E堀家　一般的にはリレーショナルデータベースを使った方が簡単にできます。ただし、AWSでリレーショナルデータベースを使うにはAmazon RDSというサービスになるんですが、これを利用するにはAWSのなかでネットワークの設定が必要になるので、考えることが一気に増えます。DynamoDBならネットワークのことを一切考えなくてよいですから、すべてサーバーレスで開発するなら、Amazon RDSの利用は躊躇します。結局、レイヤーの違うサービスなんですよね。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E三浦　SQLなんてメンバーの誰も書いたことがないし、まずリレーショナルデータベース自体をよく知らない。DynamoDBのようにAPIのレスポンスだとイメージが付くんですけど、SQLだとよくわからないんですよ。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E堀家　強力な整合性のある読み込みを行うケースは、リレーショナルデータベースであってもあまりない要件です。実際には、リレーショナルデータベースでも、リードレプリカが存在する場合に書き込みしたデータが全てのレプリカに完全に伝搬するのに少しの時差があるんですけど、そこの時差で困るケースってあまりないですから。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E――ECでそこまでトラフィックが殺到したのは、「水曜どうでしょう」のような人気コンテンツだからですよね。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E三浦　ただ、テレビ放送がきっかけになってウェブサーバーが落ちるということはよくある話で、TV業界は「スパイク」を見やすい業界と良く言われています。AWSの認定試験でも、「TVCMを受けてスパイクがたくさん来る場合はどうするか」という問題がよく出されます。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003E単純なコンテンツサーバーだけではなくて、ECの場合でもDynamoDBを使ったサーバーレスで構築できて、スパイクにも対応できるというのは、いざというときに切れるカードを持てるようになったので、すごく大きいことです。最終的には、TV局でのこうしたウェブ周りのシステムのノウハウをつかって、他の地方局をお手伝いできるようになれたらいいと思っています。\u003C\u002Fp\u003E\n\n\n\n\u003Cp\u003Eそのためにも、金さんのようなエンジニアの考え方や行動指針をもっと身につけて、最終的には誰にも頼らずに自社内だけで考えたり、作ったりできるようになっていければいいと思っています。まだまだ、金さんには頼ることが多いですが、すごく成長させていただいて、その目標に向けた大きな一歩を踏み出せたのはServerless Operationsのおかげです。\u003C\u002Fp\u003E\n","date":"2021.08.13","path":"\u002Fworks\u002F396\u002F","featuredMedia":{"sourceUrl":"https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002Fスクリーンショット-2021-08-14-12.07.21.png","altText":"新たな収益源として独自サービスの内製化を目指した地方局が求める「完全サーバーレス」の実現を支援","mediaDetails":{"width":2178}},"categories":[{"id":"5","title":"Works","path":"\u002Fcategory\u002Fworks\u002F"}],"tags":[{"id":"10","title":"Lambda","path":"\u002Ftag\u002Flambda\u002F"},{"id":"2","title":"Serverless","path":"\u002Ftag\u002Fserverless\u002F"}],"acf":{"companyName":"北海道テレビ放送株式会社","companyProfile":"\u003Cp\u003E\u003Cspan style=\"font-weight: 400;\"\u003E北海道テレビ放送(HTB)は\u003Cbr \u002F\u003E\n1968年に北海道初のUHF局として誕生した民間放送局です。\u003Cbr \u002F\u003E\n「水曜どうでしょう」を初めとしたバラエティ番組や、多くの受賞歴経験を持つニュース・ドキュメンタリー、そしてドラマなど、様々な分野の番組制作や放送を通して、「ユメミル、チカラ」を応援し、 地域の未来に貢献していきたいと考えています。\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n","companyLogo":{"sourceUrl":"https:\u002F\u002Fcdn.getshifter.co\u002Ff6642def64a63651c07142605e040674c5441f6d\u002Fuploads\u002F2021\u002F08\u002F0001-00-20170601170222.png","altText":""}}},"metadata":{"siteName":"Serverless Operations","siteDescription":"Serverless Operationsは、これまでグローバルの第一線で培ってきたクラウド技術（AWS − アマゾンウェブサービス）の豊富な実績と知見を活かし、お客さまのサーバーレスによる開発や運用の支援、コンサルティングまで一貫してサポート。サーバーレスに関するさまざまな課題を解決いたします。","siteUrl":"https:\u002F\u002Fserverless.co.jp","siteOgImage":"https:\u002F\u002Fserverless.co.jp\u002Fogp.png"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.f355efd1.js" defer></script><script src="/assets/js/page--src--templates--word-press-works-vue.dc66c364.js" defer></script><script data-vue-tag="ssr" src="https://webfont.fontplus.jp/accessor/script/fontplus.js?LuMx0zy9taw%3D&box=ME4Rs88c3-0%3D&aa=1&ab=2" data-body="true"></script>
  </body>
</html>
